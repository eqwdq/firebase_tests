<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <link rel="stylesheet" href="upload image full project.css">
</head>
<body>
    <label>Product Name</label> <input type="text" id="nameinp"> <br> <br>
    <label>Product Price</label> <input type="text" id="priceinp"> <br> <br>
    <label>Stock quantity</label> <input type="text" id="stockinp"> <br> <br>
    <label > Category</label>
    <select id="catinp">
        <option value="Keyboard & Mouse">Keyboard & Mouse</option>
        <option value="Laptops">Laptops</option>
        <option value="Monitors">Monitors</option>
        <option value="Graphics Card">Graphics Card</option>
        <option value="Power Supply">Power Supply</option>
    </select> <br> <br>
    <label>Points #1</label> <input type="text" id="p1inp" class=".pointers"> <br> <br>
    <label>Points #2</label> <input type="text" id="p2inp" class=".pointers"> <br> <br>
    <label>Points #3</label> <input type="text" id="p3inp" class=".pointers"> <br> <br>
    <label>Points #4</label> <input type="text" id="p4inp" class=".pointers"> <br> <br>

    <label id="pdlab"> Product Description</label> <textarea id="desarea"></textarea> <br> <br>

    <div id="imagesDiv"></div>

    <div id="controldiv">
        <label ></label><label id="loadlab">uploading 1 of 3</label>
        <button id="addprodbtn">Add Product</button>
        <button id="selimgsbtn">Select Product</button>
    </div>

    <script type="module">

        var files = [];
        var FileReaders = [];
        var ImageLinksArray = [];

        const imgdiv = document.getElementById('imagesDiv');
        const selBtn = document.getElementById('selimgsbtn');
        const addBtn = document.getElementById('addprodbtn');
        const proglab = document.getElementById('loadlab');

        const name = document.getElementById('nameinp');
        const category = document.getElementById('catinp');
        const description = document.getElementById('desarea');
        const price = document.getElementById('priceinp');
        const stock = document.getElementById('stockinp');

        const p1 = document.getElementById('p1inp');
        const p2 = document.getElementById('p2inp');
        const p3 = document.getElementById('p3inp');
        const p4 = document.getElementById('p4inp');

        function OpenFileDialog() {
            let inp = document.createElement('input');
            inp.type = 'file';
            inp.multiple = 'multiple';

            inp.onchange = (e) => {
                AssingImgsToFilesArray(e.target.files);
                CreateImgTags();
            }

            inp.click();
        }

        function AssingImgsToFilesArray(thefiles) {
            let num = files.length + thefiles.length;
            let looplim = (num <= 10) ? thefiles.length : (10-files.length)

            for (let i = 0; i <  looplim; i++) {
                files.push(TheFiles[i]);
            }

            if(num > 10) alert("maximum 10 images are allowed!");
        }

        function CreateImgTags() {
            imgdiv.innerHTML = '';
            imgdiv.classList.add('imageDivStyle')

            for (let i = 0; i <  files.length; i++) {
                FileReaders[i] = new FileReader();

                FileReaders[i].onload = function() {
                    var img = document.createElement('img');
                    img.id = 'imgNo' + i;
                    img.classList.add('imgs');
                    img.src = FileReaders[i].result;
                    imgdiv.append(img)
                }

                FileReaders[i].readAsDataURL(files[i])
            }
        }

        selBtn.addEventListener('click', OpenFileDialog);


    </script>

</body>
</html>